function isNumberKey(n){var r,u,f,t;if(window.event?(r=window.event.keyCode,u=window.event.ctrlKey?!0:!1):(r=n.which,u=n.ctrlKey?!0:!1),u)for(f=["c","x","v"],i=0;i<f.length;i++)if(f[i].toLowerCase()==String.fromCharCode(r).toLowerCase())return console.log("Key combination CTRL + "+String.fromCharCode(r)+" has been disabled."),!1;return(n=n||n.event,t=n.which?n.which:n.keyCode,t<=31||t>=48&&t<=57||t>=96&&t<=105)?!0:!1}function onSearchTeamSelectedChange(n){var t=n.params.data;$("#teamLeaderUserId").val(t.id2);$("#teamLeaderName").val(t.text1).trigger("change");$("#teamLeaderMobile").val(t.text2).trigger("change")}function showSorryPopup(){alert("Xin lỗi bạn, tính năng này chưa hoạt động.\nLiên hệ timdoinhanh.com@gmail.com")}function getParameterByName(n,t){t||(t=window.location.href);n=n.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)","gi"),i=r.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function startTimer(n,t,i){var f=n,r,u,e=setInterval(function(){r=parseInt(f/60,10);u=parseInt(f%60,10);r=r<10?"0"+r:r;u=u<10?"0"+u:u;t.text(r+":"+u);--f<0&&(f=0,clearInterval(e),i&&i())},1e3)}function makeAjaxRequest(n,t,i,r){i=i||{};var u=t=="GET"?$.param(i):JSON.stringify(i);$.ajax({type:t,url:n,headers:{"X-Auth-Token":common.config.xAuthToken},data:u,contentType:"application/json",dataType:"json",success:r,error:function(){console.log("error")}})}function getUserOSName(){var n="Unknown";return window.navigator.userAgent.indexOf("Windows NT 10.0")!=-1&&(n="Windows 10"),window.navigator.userAgent.indexOf("Windows NT 6.2")!=-1&&(n="Windows 8"),window.navigator.userAgent.indexOf("Windows NT 6.1")!=-1&&(n="Windows 7"),window.navigator.userAgent.indexOf("Windows NT 6.0")!=-1&&(n="Windows Vista"),window.navigator.userAgent.indexOf("Windows NT 5.1")!=-1&&(n="Windows XP"),window.navigator.userAgent.indexOf("Windows NT 5.0")!=-1&&(n="Windows 2000"),window.navigator.userAgent.indexOf("Mac")!=-1&&(n="Mac/iOS"),window.navigator.userAgent.indexOf("X11")!=-1&&(n="UNIX"),window.navigator.userAgent.indexOf("Linux")!=-1&&(n="Linux"),n}function gonative_onesignal_info(n){makeAjaxRequest("/api/oneSignal/update","POST",n,function(){})}function onFirebabseMessagingTokenRefresh(n){console.log("Token refreshed.");setTokenSentToServer(!1);sendTokenToServer(n);initializeFirebaseMessaging()}function onFirebaseMessagingMessage(n){console.log("Message received. ",n)}function initializeFirebaseMessaging(){firebaseMessaging.getToken().then(function(n){n?sendTokenToServer(n):(console.log("No Instance ID token available. Request permission to generate one."),requestNotificationPermission(),updateUIForPushPermissionRequired(),setTokenSentToServer(!1))}).catch(function(n){console.log("An error occurred while retrieving token. ",n);setTokenSentToServer(!1)})}function sendTokenToServer(n){if(!isTokenSentToServer()||!0){var t=(new Fingerprint).get(),i=getUserOSName();makeAjaxRequest("/api/firebase-messaging/updatetoken","POST",{DeviceId:t,DeviceToken:n,DeviceOS:i},function(){console.log("Updated token")});setTokenSentToServer(!0)}}function isTokenSentToServer(){return window.localStorage.getItem("sentToServer")==1}function setTokenSentToServer(n){window.localStorage.setItem("sentToServer",n?1:0)}function requestNotificationPermission(){console.log("Requesting permission...");firebaseMessaging.requestPermission().then(function(){initializeFirebaseMessaging()}).catch(function(n){console.log("Unable to get permission to notify.",n)})}function deleteFirebaseMessagingToken(){firebaseMessaging.getToken().then(function(n){firebaseMessaging.deleteToken(n).then(function(){console.log("Token deleted.");setTokenSentToServer(!1);initializeFirebaseMessaging()}).catch(function(n){console.log("Unable to delete token. ",n)})}).catch(function(n){console.log("Error retrieving Instance ID token. ",n)})}function hasScrolled(){var n=$(this).scrollTop();Math.abs(lastScrollTop-n)<=delta||(n>lastScrollTop&&n>navbarHeight?$("header").removeClass("nav-down").addClass("nav-up"):n+$(window).height()<$(document).height()&&$("header").removeClass("nav-up").addClass("nav-down"),lastScrollTop=n)}var sport,owlTab;$(document).ready(function(){$("#myTabs a").click(function(n){n.preventDefault();$(this).tab("show")});$(".sidebar-filter-container .m-btn-expand-holder").click(function(){$(this).closest(".sidebar-filter-container").find(".sidebar").toggle()});$("#isMobileDevice").is(":visible")&&($("#stadium-list li.item-card>.row").click(function(){location.href=$(this).find("a.btn-chi-tiet").attr("href")}),$("#stadium-list li.item-card>.row").click(function(){location.href=$(this).find("a.btn-chi-tiet").attr("href")}),$(".list-item-san-sidebar .item-card>.row").click(function(){location.href=$(this).find("h2 a.item-name-link").attr("href")}),$("#stadium-list li.item-card a").click(function(n){n.preventDefault()}),$("#match-item-list li.item-card>.row").click(function(){location.href=$(this).find(".match-header-texts h2 a").attr("href")}),$("#match-item-list li.item-card button, #match-item-list li.item-card a").click(function(n){n.stopPropagation()}));sport.account.init();sport.stadiumDetail.init();$(".tabs li").click(function(){var n=$(this).parent().find("li"),t;n.removeClass("active");$(this).addClass("active");n.each(function(){var n=$(this).attr("target-id");$(n).hide()});t=$(this).attr("target-id");$(t).show()})});sport={};sport.common={route:{setUiRouting:function(n){alert(n)}},modal:{show:function(n,t,i){setTimeout(function(){$("#layout_modal_button").attr("data-target","#"+n);$("#layout_modal_button").click();var r=$("#"+n);t&&r.find(".modal-title").html(t);i&&r.find(".modal-body").html(i)},50)},hide:function(n){$("#"+n).find("button.close")[0].click()},showConfirm:function(n,t){$("#layout_modal_info").find(".modal-content-info").html(n);$("#layout_modal_info").find(".confirm-yes").attr("onclick",t);sport.common.modal.show("layout_modal_info")},showInfo:function(n){$("#layout_modal_info").find(".modal-content-info").html(n);sport.common.modal.show("layout_modal_info")}},ajaxLoading:function(n,t,i,r){typeof r=="undefined"&&(r=function(){});$.ajax({url:n,container:t,type:"GET",success:function(n){$("#"+this.container).html(n.DataHtml);r()},error:function(){}})},boostrap:{select2:function(n){$("#"+n).select2()},roxyFileBrowser:function(n,t,i,r){var u=PrefixURL+"/fileman/index.html";return u+=u.indexOf("?")<0?"?type="+i:"&type="+i,u+="&input="+n+"&value="+r.document.getElementById(n).value,tinyMCE.activeEditor.settings.language&&(u+="&langCode="+tinyMCE.activeEditor.settings.language),tinyMCE.activeEditor.windowManager.open({file:u,title:"Images manager",width:1024,height:500,resizable:"yes",plugins:"media",inline:"yes",close_previous:"no"},{window:r,input:n}),!1},tinymce:function(n,t){tinymce.init({selector:"#"+n,theme:"modern",height:t,plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor"],theme_advanced_font_sizes:"10px,12px,13px,14px,16px,18px,20px",font_size_style_values:"12px,13px,14px,16px,18px,20px",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media | forecolor backcolor emoticons | sizeselect | bold italic | fontselect |  fontsizeselect",templates:[{title:"Test template 1",content:"Test 1"},{title:"Test template 2",content:"Test 2"}],file_browser_callback:common.boostrap.roxyFileBrowser})},aceEditor:function(n){var t=ace.edit(n);return ace.require("ace/ext/settings_menu").init(t),t.setTheme("ace/theme/textmate"),t.session.setMode("ace/mode/csharp"),t.commands.addCommands([{name:"showSettingsMenu",bindKey:{win:"Ctrl-q",mac:"Command-q"},exec:function(n){n.showSettingsMenu()},readOnly:!0}]),t},fileManager:{init:function(){$(document).on("click",".modal-backdrop",function(){$("#common_layout_modal_fileManager").hide();$(this).hide()})},openModal:function(n){common.boostrap.fileManager.init();var t=$(n).attr("data-id"),i="<iframe src='"+location.origin+"/"+PrefixURL+"/fileman/index.html?integration=product&txtFieldId="+t+"' style='width: 100%; height: 100%' frameborder='0'><\/iframe>";$("#common_layout_modal_fileManager").html(i);$("#common_button_modal_fileManager").click()}}},notify:{system_msg_success:'<div class="alert alert-success system-msg"><a href="#" class="close" data-dismiss="alert" aria-label="close">&times;<\/a><h4>Success!<\/h4> {0}<\/div>',system_msg_error:'<div class="alert alert-danger system-msg"><a href="#" class="close" data-dismiss="alert" aria-label="close">&times;<\/a><h4>Error!<\/h4> {0}<\/div>',showMessage:function(n,t){var i="";t=="success"?((n==undefined||n=="")&&(n="Save successful.!"),i=common.notify.system_msg_success.replace("{0}",n)):t=="error"&&((n==undefined||n=="")&&(n="Error!"),i=common.notify.system_msg_error.replace("{0}",n));$("body").append(i);$("body").animate({scrollTop:0},"500",function(){});setTimeout(function(){$(".system-msg").fadeOut("slow")},5e3);setTimeout(function(){$(".system-msg").remove()},5e3)},showError:function(n){common.notify.showMessage(n,"error")},showSuccess:function(n){common.notify.showMessage(n,"success")}},route:{setUiRouting:function(n){window.location.href=n;$("#divAjaxLoadingRequest").addClass("div-routing-request")}},loading:{loading_template:'<div class="loader"><\/div>',showLoading:function(){$("body").append(this.loading_template);var n=$(".loading");$(n).show();$(n).hasClass("hide")&&$(n).removeClass("hide");$(n).addClass("show")},hideLoading:function(){$("body").append(this.loading_template);$(".loader").fadeOut("slow")}},mediaModal:{init:function(){$(".upload-image-trigger").click(function(){common.modal.show("modal_media_selection");common.mediaModal.triggerName=$(this).attr("trigger-name")})},triggerName:"",hide:function(){common.modal.hide("modal_media_selection")}},helper:{checkValidateNumberRange:function(n,t,i){return!jQuery.isNumeric(n)||n<t||n>i},parseBoolCheckbox:function(){$(".checkbox-boolean").each(function(){$(this).is(":checked")?$(this).val("True"):$(this).val("False")})},newGuid:function(){function n(n){var t=(Math.random().toString(16)+"000000000").substr(2,8);return n?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return n()+n(!0)+n(!0)+n()}},validation:{showCustomValidationAjax:function(n,t){var i=$('.custom-alidation-ajax[validatefor="'+t+'"]'),r="<span>"+n+"<\/span>";i.html(r);i.removeClass("field-validation-valid");i.addClass("field-validation-error")},hideCustomValidationAjax:function(n){itemValidation=$('.custom-alidation-ajax[validatefor="'+n+'"]');itemValidation.html("");itemValidation.addClass("field-validation-valid");itemValidation.removeClass("field-validation-error")}},fileManager:{openFileManager:function(n){var t=$(n).attr("data-id"),i="<iframe src='"+PrefixURL+"/fileman/index.html?integration=product&txtFieldId="+t+"' style='width: 100%; height: 100%' frameborder='0'><\/iframe>";$("#layout_modal_fileManager").html(i);$("#button_modal_fileManager").click()},closeFileManager:function(){$(document).on("click",".modal-backdrop",function(){$("#layout_modal_fileManager").hide();$(this).hide()})}},recallFnc:function(){$(".alert").each(function(){var n=$(this);if(n.hasClass("alert-dismissible"))n.children(".close").on("click",function(t){t.preventDefault();n.remove()})})}};sport.account={init:function(){this.register();this.signIn();this.googleLogIn();this.facebookLogIn();this.editProfile();this.cancelProfile();this.saveProfile();this.changePassword();this.uploadProfile();this.forgotPassword();this.confirmationCode();this.resetPassword();this.confirmRegist()},register:function(){$(document).on("submit","#frmRegister",function(){this[0].checkValidity()&&($("#account-creation-form").addClass("disabledContainer"),$("#btnRegister").html('<img src="/images/page-loader.gif" style="float:left;margin-right:0.5em;" height="21" width="21"> Đang đăng kí ...'),$.ajax({url:"/User/Register",type:"POST",data:$("#frmRegister").serialize(),success:function(n){if(n.IsError==!1){window.location.reload();return}typeof n.Message!="undefined"&&($("#account-creation-form").removeClass("disabledContainer"),$("#btnRegister").html("Đăng kí"),$(".msg-wraper").removeClass("hidden"),$(".messge").html(n.Message))},error:function(){$("#account-creation-form").removeClass("disabledContainer");$("#btnRegister").html("Đăng kí");$(".msg-wraper").removeClass("hidden");$(".messge").html(data.Message);console.log("Err")}}));event.preventDefault()})},signIn:function(){$(document).on("submit","#frmSignIn",function(){this[0].checkValidity()&&($(".signin-body").addClass("disabledContainer"),$("#btnSignIn").html('<img src="/images/page-loader.gif" style="float:left;margin-right:0.5em;" height="21" width="21"> ĐANG ĐĂNG NHẬP ...'),$.ajax({url:"/User/Login",type:"POST",data:$("#frmSignIn").serialize(),success:function(n){if($(".signin-body").removeClass("disabledContainer"),$("#btnSignIn").html("ĐĂNG NHẬP"),n.IsError==!1){if(n.returnUrl!="")location.href=n.returnUrl;else{var t=getParameterByName("returnUrl");t!=null&&t!=""?location.href=t:window.location.pathname=="/dang-nhap.html"?location.href="/":location.reload()}return}$("#spanSignInMsg").html(n.ErrorMessage);typeof n.Html!="undefined"&&($(".login-error").html(n.Html),$.validator.unobtrusive.parse($("form")))},error:function(){$(".signin-body").removeClass("disabledContainer");$("#btnSignIn").html("Đăng nhập");console.log("Err")}}));event.preventDefault()});$(".input-signin").keypress(function(n){if(n.which==13)return $("#btnSignIn").focus().click(),!1})},googleLogIn:function(){$(document).on("click").on("click",".login-google",function(){googleModule.googleLogIn()})},facebookLogIn:function(){$(document).on("click").on("click",".logon-facebook",function(){facebookModule.facebookLogIn()})},editProfile:function(){$(document).on("click","#btnProfileEdit",function(){$("#profile").addClass("disabledContainer");$("#btnProfileEdit").html('<img src="/images/page-loader.gif" style="float:left;margin-right:0.5em;" height="21" width="21"> Đang tải dữ liệu ...');$.ajax({url:"/User/Profile",type:"GET",data:{showType:"edit"},success:function(n){$("#profile").removeClass("disabledContainer");$("#btnProfileEdit").html("Chỉnh sửa");typeof n.Html!="undefined"&&$(".profile-edit").html(n.Html);$(".profile-view").hide();$(".profile-edit").show()},error:function(){$("#profile").removeClass("disabledContainer");$("#btnProfileEdit").html("Chỉnh sửa");console.log("Err")}})})},saveProfile:function(){$(document).on("click","#btnProfileSave",function(){$("#profile").addClass("disabledContainer");$("#btnProfileSave").html('<img src="/images/page-loader.gif" style="float:left;margin-right:0.5em;" height="21" width="21"> Đang xử lý ...');$.ajax({url:"/User/SaveProfile",type:"POST",data:$("#frmEditProfile").serialize(),success:function(n){$("#profile").removeClass("disabledContainer");$("#btnProfileSave").html("Lưu thay đổi");typeof n.Html!="undefined"&&($(".profile-edit").html(n.Html),$.validator.unobtrusive.parse($("form")),$(".user-name").html($("#UserFirstName").val()+" "+$("#UserLastName").val())+" ")},error:function(){$("#profile").removeClass("disabledContainer");$("#btnProfileSave").html("Lưu thay đổi");console.log("Err")}})})},cancelProfile:function(){$(document).on("click","#btnProfileCancel",function(){$.ajax({url:"/User/Profile",type:"GET",data:{showType:"view"},success:function(n){typeof n.Html!="undefined"&&$(".profile-view").html(n.Html);$(".profile-view").show();$(".profile-edit").hide()},error:function(){console.log("Err")}})})},changePassword:function(){$(document).on("click","#btnChangePass",function(){$.ajax({url:"/User/ChangePassword",type:"POST",data:$("#frmChangePassword").serialize(),success:function(n){typeof n.Html!="undefined"&&($("#changepass").html(n.Html),$.validator.unobtrusive.parse($("form")))},error:function(){console.log("Err")}})})},uploadProfile:function(){$("#profile-avatar").click(function(){$("#btnprofileUpload").click()});$("#btnprofileUpload").fileupload({autoUpload:!0,url:"/user/uploadprofile",dataType:"json",add:function(n,t){var i=t.submit().success(function(n){n.isUploaded?($("#profile-avatar").attr("src",n.path),$("#UserAvatarPath").val(n.path),$(".navbar-profile").find("img")!=null&&$(".navbar-profile").find("img").attr("src",n.path)):(typeof n.message!="undefined"&&alert(n.message),$("#profile-avatar").attr("src","/images/avatar-1.jpg"))}).error(function(n,t,i){(typeof n!="undefined"||typeof t!="undefined"||typeof i!="undefined")&&alert("Có lỗi xảy ra")})},fail:function(n,t){t.files[0].error&&alert("Có lỗi xảy ra")}})},readURL:function(n){if(n.files&&n.files[0]){var t=new FileReader;t.onload=function(n){$("#profile-avatar").attr("src",n.target.result);$("#btnprofileUpload").css("color","transparent")};t.readAsDataURL(n.files[0])}},validEmail:function(n){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)},validPhoneNumber:function(n){return n.length<6||!/[0-9 -()+]+$/.test(n)?!1:!0},validUserName:function(n){var t=$(n).attr("data-msg-username-invalid"),i=$(n).attr("data-msg-require");return i=typeof i!="undefined"?i:"",t=typeof t!="undefined"?t:"",n.value==""?(n.setCustomValidity(i),n.value=""):this.validEmail(n.value)||this.validPhoneNumber(n.value)?n.setCustomValidity(""):n.setCustomValidity(t),!0},validateControl:function(n){var t=$(n).attr("data-msg-require"),i=$(n).attr("data-msg-invalid");return t=typeof t!="undefined"?t:"",i=typeof i!="undefined"?i:"",n.value==""?(n.setCustomValidity(t),n.value=""):n.validity.typeMismatch||n.validity.patternMismatch?n.setCustomValidity(i):n.setCustomValidity(""),!0},matchField:function(n,t){var i=$(t).attr("data-msg-require"),r=$(t).attr("data-msg-invalid");return i=typeof i!="undefined"?i:"",r=typeof r!="undefined"?r:"",t.value==""?(t.setCustomValidity(i),t.value=""):$("#"+n).val()!=t.value?t.setCustomValidity(r):t.setCustomValidity(""),!0},forgotPassword:function(){$(document).on("submit","#frmFogotPassword",function(){$(".forgot-password").addClass("disabledContainer");$("#btnForgotPassword").html('<img src="/images/page-loader.gif" style="float:left;margin-right:0.5em;" height="21" width="21"> Đang gửi ...');var n=$("#UserName").val();this[0].checkValidity()&&$.ajax({url:"/User/SendVerification",type:"POST",data:{userName:n},success:function(n){if($(".forgot-password").removeClass("disabledContainer"),$("#btnForgotPassword").html("Gửi"),n.IsError==!1){$(".step-1").hide();$(".step-2").show();return}typeof n.Html!="undefined"&&$(".step-1 .msg-alert").html(n.Html)},error:function(){$(".forgot-password").removeClass("disabledContainer");$("#btnForgotPassword").html("Gửi");console.log("Err")}});event.preventDefault()})},confirmationCode:function(){$(document).on("submit","#frmConfirmationCode",function(){$(".step-2").addClass("disabledContainer");$("#btnConfirmationCode").html('<img src="/images/page-loader.gif" style="float:left;margin-right:0.5em;" height="21" width="21"> Đang xử lý ...');var n=$("#securityCode").val();this[0].checkValidity()&&$.ajax({url:"/User/VerifyCode",type:"POST",data:{code:n},success:function(n){if($(".step-2").removeClass("disabledContainer"),$("#btnConfirmationCode").html("Tiếp tục"),n.IsError==!1){$(".step-2").hide();$(".step-3").show();return}typeof n.Html!="undefined"&&$(".step-2 .msg-alert").html(n.Html)},error:function(){$(".step-2").removeClass("disabledContainer");$("#btnConfirmationCode").html("Tiếp tục");console.log("Err")}});event.preventDefault()})},resetPassword:function(){$(document).on("submit","#frmPasswordReset",function(){$(".step-3").addClass("disabledContainer");$("#btnResetPassword").html('<img src="/images/page-loader.gif" style="float:left;margin-right:0.5em;" height="21" width="21"> Đang xử lý ...');var n=$("#password").val();this[0].checkValidity()&&$.ajax({url:"/User/SetPassword",type:"POST",data:{password:n},success:function(n){if($(".step-3").removeClass("disabledContainer"),$("#btnResetPassword").html("Hoàn thành"),n.IsError==!1){$(".step-3").hide();$(".step-4").show();return}typeof n.Html!="undefined"&&$(".step-3 .msg-alert").html(n.Html)},error:function(){$(".step-3").removeClass("disabledContainer");$("#btnResetPassword").html("Hoàn thành");console.log("Err")}});event.preventDefault()})},confirmRegist:function(){$(document).on("submit","#confirmRegistForm",function(){$(".account-body").addClass("disabledContainer");$("#confirmRegist").html('<img src="/images/page-loader.gif" style="float:left;margin-right:0.5em;" height="21" width="21"> Đang xử lý ...');var n=$("#password").val();this[0].checkValidity()&&$.ajax({url:"/user/Confirmation",type:"POST",data:$("#confirmRegistForm").serialize(),success:function(n){if($(".account-body").removeClass("disabledContainer"),$("#confirmRegist").html("Đăng nhập"),n.IsError==!1){location.href="/";return}typeof n.Html!="undefined"&&$(".msg-alert").html(n.Html)},error:function(){$(".account-body").removeClass("disabledContainer");$("#btnResetPassword").html("Đăng nhập");console.log("Err")}});event.preventDefault()})}};var facebookModule={facebookLogIn:function(){var i=$("#facebookId").val(),t=window.location.origin+"/User/FacebookLogin",r="http://www.facebook.com/dialog/oauth/?client_id="+i+"&redirect_uri="+t+"&state=0&scope=email,user_birthday&response_type=token&display=popup",n=commonLogInModule.popupwindow(r,"--- Facebook Login --- ",830,460),u=window.setInterval(function(){try{if(n.document.URL.indexOf(t)!=-1){window.clearInterval(u);var i=n.document.URL,r=commonLogInModule.gup(i,"access_token");n.close();commonLogInModule.callBackLogIn("/Ajax/User/FacebookLogin",r)}}catch(f){return}},500)}},googleModule={googleLogIn:function(){var i=$("#googleClientId").val(),t=window.location.origin+"/user/googlelogin",r="https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email&client_id="+i+"&redirect_uri="+t+"&response_type=token",n=commonLogInModule.popupwindow(r,"--- Google Login --- ",830,460),u=window.setInterval(function(){try{if(n.document.URL.indexOf(t)!=-1){window.clearInterval(u);var i=n.document.URL,r=commonLogInModule.gup(i,"access_token");n.close();commonLogInModule.callBackLogIn("/ajax/user/googlelogin",r)}}catch(f){console.log(f.message);return}},500)}},commonLogInModule={popupwindow:function(n,t,i,r){var u=screen.width/2-i/2,f=screen.height/2-r/2;return window.open(n,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+i+", height="+r+", top="+f+", left="+u)},gup:function(n,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r="[\\#&]"+t+"=([^&#]*)",u=new RegExp(r),i=u.exec(n);return i==null?"":i[1]},callBackLogIn:function(n,t){$.ajax({url:n,data:{accessToken:t},type:"POST",dataType:"json",success:function(n){if(n.IsError==!1){location.href="/";return}location.href=location.href},error:function(n){console.log(n)}})}};sport.stadiumDetail={init:function(){},isReloadCalendar:!1,calendarTarget:"",bookingTimes:[],currentBookingTime:[],currentDate:"",isFirst:!0,settingCalendar:function(n){var t=new Date;$("#ticket-select-date").datetimepicker({format:"DD/MM/YYYY",inline:!0,minDate:t,icons:{previous:"fa fa-angle-left",next:"fa fa-angle-right"}}).on("dp.change",function(n){var t=moment(n.date).format("DD"),i=moment(n.date).format("MM-YYYY");$(".currentDay").html(t);$(".currentMonth").html(i);sport.stadiumDetail.currentBookingTime=sport.stadiumDetail.getCurrentBookingTimes(moment(n.date).format("YYYY-MM-DD"));$("#calendarBookingTime").html("");sport.stadiumDetail.markAsUnavailableDate();sport.stadiumDetail.fillCurrentShowTimes(sport.stadiumDetail.currentBookingTime)}).on("dp.update",function(n){var t=$(this).closest(".calendar-row"),i=$(t).attr("data-stadiumid"),r=$(t).attr("data-numberofplays"),u=$(t).attr("data-price"),f=moment(n.viewDate).format("MM"),e=moment(n.viewDate).toDate().getFullYear();sport.stadiumDetail.getBookingTimes(i,r,u,f,e,function(){})});typeof n=="function"&&n()},settingBookingForm:function(){var n=new Date;$("#fromDateDatePicker").datetimepicker({format:"DD/MM/YYYY",minDate:n,icons:{previous:"fa fa-angle-left",next:"fa fa-angle-right"}}).on("dp.hide",function(n){$("#toDateDatePicker").data("DateTimePicker").minDate(n.date)});$("#toDateDatePicker").datetimepicker({format:"DD/MM/YYYY",minDate:n,icons:{previous:"fa fa-angle-left",next:"fa fa-angle-right"}}).on("dp.hide",function(n){$("#fromDateDatePicker").data("DateTimePicker").maxDate(n.date)});$("#is-repeat").click(function(){$(this).is(":checked")?($("#booking-popup").find(".date-schedule").removeClass("hidden"),$("#hddRepeat").val("1")):($("#booking-popup").find(".date-schedule").addClass("hidden"),$("#hddRepeat").val("0"))})},showCalendar:function(n){var r,i,t;if(sport.stadiumDetail.calendarTarget=$(n),r=$(n).closest(".calendar-row").hasClass("active"),r&&sport.stadiumDetail.isReloadCalendar!=!0)$(n).closest(".calendar-row").find(".stadium-calendar").length>0&&($(n).closest(".calendar-row").find(".stadium-calendar").html(""),$(n).closest(".calendar-row").removeClass("active"));else{sport.stadiumDetail.isReloadCalendar=!1;i=$(".des-san").find(".calendar-row.active").find(".stadium-calendar");i.length>0&&(i.html(""),$(".calendar-row").removeClass("active"));t=$(n).closest(".calendar-row");$(t).addClass("active");var u=$(t).attr("data-stadiumid"),f=$(t).attr("data-numberofplays"),e=$(t).attr("data-price");sport.stadiumDetail.getBookingTimes(u,f,e,null,null,function(){var n=new Date,i=moment(n).format("DD"),r=moment(n).format("MM-YYYY");$(".currentDay").html(i);$(".currentMonth").html(r);sport.stadiumDetail.currentBookingTime=sport.stadiumDetail.getCurrentBookingTimes(moment(n).format("YYYY-MM-DD"));$("#calendarBookingTime").html("");sport.stadiumDetail.fillCurrentShowTimes(sport.stadiumDetail.currentBookingTime);$(t).find(".stadium-calendar").html($(".calendar-tpl").html());sport.stadiumDetail.settingCalendar(function(){})})}},fillCurrentShowTimes:function(n){var t="";n!=null&&($.each(n,function(n,i){var r=moment(i.startTime,"HH:mm:ss").format("HH:mm")+"-"+moment(i.endTime,"HH:mm:ss").format("HH:mm"),u=['<button type="button" onclick="sport.stadiumDetail.showPopupBooking(this)"','data-timeframeid="'+i.timeFrameId+'" data-starttime="'+i.startTime+'" data-endtime="'+i.endTime+'" data-available="'+i.isAvailable+'"','class="btn btn-default btn-sm btn-time-available-'+i.isAvailable+'">','<i class="fa fa-clock-o" aria-hidden="true"><\/i>'+r+"","<br>",'<i class="note-sm">'+(i.isAvailable?"Còn sân":"Hết sân")+"<\/i>","<\/button>"].join("\n");t+=u}),$("#calendarBookingTime").html(t))},getCurrentBookingTimes:function(n){var t,i;return sport.stadiumDetail.currentDate=n,t=[],sport.stadiumDetail.bookingTimes!=null&&sport.stadiumDetail.bookingTimes.length>0&&(i=!0,$.each(sport.stadiumDetail.bookingTimes,function(r,u){moment(u.date).format("YYYY-MM-DD")==n&&i&&(i=!1,t=u.times)})),t},getBookingTimes:function(n,t,i,r,u,f){var e={stadiumId:n,numberOfPlayers:t,price:i,month:r,year:u};$.ajax({type:"POST",url:"api/stadium/booking/calendar",contentType:"application/json",dataType:"json",data:JSON.stringify(e),success:function(n){n.isSuccessful?(sport.stadiumDetail.bookingTimes=n.data,setTimeout(function(){sport.stadiumDetail.markAsUnavailableDate()}),typeof f=="function"&&f()):sport.stadiumDetail.bookingTimes=[]},error:function(){console.log("An error occurred while get showtimes!")}})},hasAvailableTime:function(n){var t=!1;return n!=null&&n.length>0?($.each(showTimes,function(n,i){i.valid&&(t=!0)}),t):!1},createBooking:function(n){var t,r,c,l;if($("#hasSignin").val()!="True"){$("#returnUrl").val(document.URL);$("#loginBtn").click();return}if(t=$("#stadium-booking-data"),t.length<=0)sport.common.modal.showInfo("Bạn chưa chọn thời gian đặt lịch");else{var u=$(t[0]).attr("data-starttime"),a=moment(sport.stadiumDetail.currentDate).toDate(),i=$(t[0]).attr("data-endtime"),w=moment(sport.stadiumDetail.currentDate+" "+i).toDate(),f=$("#hddRepeat").val()=="1",v=0,e=[],y=$("#note").val(),o="",s="",h="1",p=$("#ddlTeam").val();if(f){if($("#fromDate").val()==""||$("#toDate").val()==""){sport.common.modal.showInfo("Bạn chưa chọn ngày bắt đầu hoặc ngày kết thúc");return}o=moment($("#fromDate").val(),"DD/MM/YYYY").toDate();s=moment($("#toDate").val(),"DD/MM/YYYY").toDate();h=$("#dayofweek").val()}r=!0;$.each(sport.stadiumDetail.currentBookingTime,function(n,t){t.startTime==u&&t.endTime==i&&r&&(r=!1,v=t.stadiumNumbers[0]!=null?t.stadiumNumbers[0].id:0,t.stadiumNumbers.length>0&&$.each(t.stadiumNumbers,function(n,t){e.push(t.id)}))});c={availableStadiumNumberIds:e,date:a,startHour:u,endHour:i,isRepeat:f,repeatStartDate:o,repeatEndDate:s,description:y,teamId:p,dayofweek:h};l={bookingRecord:c};$(n.toElement).button("loading");$.ajax({type:"POST",url:"api/stadium/client/createbooking",contentType:"application/json",data:JSON.stringify(l),headers:{"X-Auth-Token":common.config.xAuthToken},success:function(t){if(sport.common.modal.hide("booking-popup"),t.isSuccessful)sport.stadiumDetail.isReloadCalendar=!0,$(sport.stadiumDetail.calendarTarget).click(),sport.common.modal.showInfo(t.message);else{if(t.isAuthenticated==!1){$("#returnUrl").val(document.URL);$("#loginBtn").click();return}typeof t.errorMessage!="undefined"&&sport.common.modal.showInfo(t.errorMessage)}$(n.toElement).button("reset")},error:function(){console.log("An error occurred while get showtimes!");$(n.toElement).button("reset")}})}},showPopupBooking:function(n){var i=moment($(n).attr("data-starttime"),"HH:mm:ss").format("HH:mm")+" - "+moment($(n).attr("data-endtime"),"HH:mm:ss").format("HH:mm")+" ngày "+moment(sport.stadiumDetail.currentDate).toDate().toLocaleDateString(),r,t,u;if($(".modal-std-booking-time").val(i),r=$(n).attr("data-available"),r=="false"){sport.stadiumDetail.showPopupBookingUnavailable();return}t=$("#stadium-booking-data");t.attr("data-timeframeid",$(n).attr("data-timeframeid"));t.attr("data-starttime",$(n).attr("data-starttime"));t.attr("data-endtime",$(n).attr("data-endtime"));$("#hasSignin").val()!="True"?($("#returnUrl").val(document.URL),$("#loginBtn").click()):($("#booking-popup").find(".modal-body").html($(".booking-info").html()),sport.stadiumDetail.settingBookingForm(),u=moment(sport.stadiumDetail.currentDate).day(),$("#dayofweek").val(u),$(".modal-std-booking-time").val(i),sport.common.modal.show("booking-popup"))},showPopupBookingUnavailable:function(){sport.common.modal.show("booking-unavailable-subscribe")},registerNotification:function(){alert("Xin lỗi bạn, tính năng này đang được xây dựng.")},approveBooking:function(n,t){$(t.toElement).button("loading");$.ajax({type:"POST",url:"/api/stadium/booking/approval",data:JSON.stringify({bookingId:n}),contentType:"application/json",headers:{"X-Auth-Token":common.config.xAuthToken},success:function(n){n.isSuccessful?(common.ui.notification.success(n.message),setTimeout(function(){location.reload()},1e3)):(sport.common.modal.showInfo("Có lỗi xảy ra,vui lòng tải lại trang liên hệ ban quản trị website."),$(t.toElement).button("reset"))},error:function(){console.log("An error occurred while approve booking!");$(t.toElement).button("reset")}})},cancelBooking:function(n,t){if(confirm("Bạn có chắc chắn muốn hủy lịch đặt sân này")){var i={bookingId:n};$(t.toElement).button("loading");$.ajax({type:"POST",url:"/api/stadium/booking/reject",data:JSON.stringify(i),contentType:"application/json",headers:{"X-Auth-Token":common.config.xAuthToken},success:function(n){n.isSuccessful?(sport.common.modal.showInfo(n.message),setTimeout(function(){location.reload()},1e3)):(sport.common.modal.showInfo("Có lỗi xảy ra, vui lòng tải lại trang liên hệ ban quản trị website."),$(t.toElement).button("reset"))},error:function(){sport.common.modal.showInfo("Có lỗi xảy ra, vui lòng tải lại trang liên hệ ban quản trị website.")}})}},cancelBookingByUser:function(n,t){if(confirm("Bạn có chắc chắn muốn hủy lịch đặt sân này")){$(t.toElement).button("loading");var i={bookingId:n};$.ajax({type:"POST",url:"/api/stadium/booking/cancel",data:JSON.stringify(i),contentType:"application/json",headers:{"X-Auth-Token":common.config.xAuthToken},success:function(n){n.isSuccessful?(sport.common.modal.showInfo(n.message),setTimeout(function(){location.reload()},500)):(sport.common.modal.showInfo("Có lỗi xảy ra,vui lòng tải lại trang liên hệ ban quản trị website."),$(t.toElement).button("reset"))},error:function(){console.log("An error occurred while cancel booking!");$(t.toElement).button("reset")}})}},markAsUnavailableDate:function(){$.each(sport.stadiumDetail.bookingTimes,function(n,t){if(!t.isAvailable){var i=moment(t.date).format("DD/MM/YYYY");$(".day[data-day='"+i+"']").addClass("unactive")}})}};jQuery(document).ready(function(){jQuery(".slider-near-san").owlCarousel({navigation:!1,loop:!0,callbacks:!0,stagePadding:30,margin:10,itemsDesktop:[1199,1],itemsDesktopSmall:[979,1],itemsTablet:[768,1],items:1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!0,stopOnHover:!0,pagination:!0,autoHeight:!0})});jQuery(document).ready(function(){jQuery(".slider-chi-san").owlCarousel({navigation:!1,loop:!0,callbacks:!0,stagePadding:30,margin:10,dots:!0,itemsDesktop:[1199,1],itemsDesktopSmall:[979,1],itemsTablet:[768,1],items:1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!0,stopOnHover:!0,pagination:!0,autoHeight:!0})});jQuery(document).ready(function(){jQuery(".slider-dv-reg").owlCarousel({navigation:!0,loop:!0,itemsDesktop:[1199,4],itemsDesktopSmall:[979,4],itemsTablet:[768,4],items:4,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!0,stopOnHover:!0,callbacks:!0,pagination:!0,paginationNumbers:!1,navigationText:!1,autoHeight:!0})});jQuery(document).ready(function(){jQuery(".slider-hot").owlCarousel({navigation:!0,loop:!0,itemsDesktop:[1199,1],itemsDesktopSmall:[979,1],itemsTablet:[768,1],items:1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!1,stopOnHover:!1,callbacks:!0,pagination:!0,paginationNumbers:!0,navigationText:!0,autoHeight:!0})});$(function(){$('a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var n=$(this.hash);if(n=n.length?n:$("[name="+this.hash.slice(1)+"]"),n.length)return $("html, body").animate({scrollTop:n.offset().top},1e3),!1}})});var didScroll,lastScrollTop=0,delta=5,navbarHeight=$("header").outerHeight();$(window).scroll(function(){didScroll=!0});setInterval(function(){didScroll&&(hasScrolled(),didScroll=!1)},250);$("#myTabs a").click(function(n){n.preventDefault();$(this).tab("show")});owlTab=$(".tab-carousel.owl-carousel");owlTab.owlCarousel({navigation:!1,dots:!0,navigationText:["<i class='fa fa-angle-left'><\/i>","<i class='fa fa-angle-right'><\/i>"],items:3,rewindNav:!0});$(".form-filter-san-span").click(function(){$(".form-inline").show();$(this).hide();$(".form-filter-san-span-x").show()});$(".form-filter-san-span-x").click(function(){$(".form-inline").hide();$(this).hide();$(".form-filter-san-span").show()});$(document).ready(function(){$(".tab-carousel.owl-carousel").length&&($(".tab-carousel.owl-carousel .owl-item").attr("role","presentation"),$(".tab-carousel.owl-carousel .owl-item:first-child").addClass("active"));$(".tab-carousel.owl-carousel .owl-item").click(function(){$(".tab-carousel.owl-carousel .owl-item").removeClass("active");$(this).addClass("active")})});var tabs=$(".tab-carousel.owl-carousel .owl-item"),active=tabs.filter(".active"),next=active.next(".owl-item"),toClick=next.length?next.find("a"):tabs.eq(0).find("a"),indexNum=active.index();indexNum>2&&($(".owl-pagination .owl-page:eq(0)").removeClass("active"),$(".owl-pagination .owl-page:eq(1)").addClass("active"));indexNum<=2&&($(".owl-pagination .owl-page:eq(0)").addClass("active"),$(".owl-pagination .owl-page:eq(1)").removeClass("active"));toClick.trigger("click");$(document).ready(function(){$("#btn-left-sidebar").click(function(){$("#left-sidebar").fadeIn(300);$(".overlay-nav").show()});$(".overlay-nav").click(function(){$("#left-sidebar").fadeOut(200);$(".overlay-nav").hide()});$(".menu-closer").click(function(){$("#left-sidebar").fadeOut(200);$(".overlay-nav").hide()});$("#btn-right-sidebar").click(function(){$("#right-sidebar").fadeIn(300);$(".overlay-nav").show()});$(".overlay-nav").click(function(){$("#right-sidebar").fadeOut(200);$(".overlay-nav").hide()});$(".menu-closer").click(function(){$("#right-sidebar").fadeOut(200);$(".overlay-nav").hide()});$("input.date-san").datepicker({format:"mm/dd/yyyy",todayBtn:"linked",todayBtn:!0,language:"vi"});$(".clear-check").click(function(){$(".list-left-check input[type=checkbox]").each(function(){$(this).prop("checked",!1)})});jQuery(".comment-btn").click(function(){jQuery(".form-comments").show("400");jQuery(".comment-btn").hide("400");jQuery(".closer-btn").show("400")});jQuery(".closer-btn").click(function(){jQuery(".form-comments").hide("400");jQuery(".comment-btn").show("400");jQuery(".closer-btn").hide("400")});jQuery(".comment-reply").click(function(){jQuery(this).hide();jQuery(this).parent().find(".comment-reply-closer").fadeIn();jQuery(this).parent().find(".form-comments-mini-div").fadeIn()});jQuery(".comment-reply-closer").click(function(){jQuery(this).hide();jQuery(this).parent().find(".comment-reply").fadeIn();jQuery(this).parent().find(".form-comments-mini-div").hide()});$("#myTabs a").click(function(n){n.preventDefault();$(this).tab("show")})});jQuery(document).ready(function(){var t=220,n=500;jQuery(window).scroll(function(){jQuery(this).scrollTop()>t?jQuery(".back-to-top").fadeIn(n):jQuery(".back-to-top").fadeOut(n)});jQuery(".back-to-top").click(function(){return $("html, body").animate({scrollTop:0},"slow"),!1})})