var app=angular.module("autocomplete",[]),commonData,teamData;app.directive("autocomplete",function(){var n=-1;return{restrict:"E",scope:{searchParam:"=ngModel",suggestions:"=data",onType:"=onType",onSelect:"=onSelect",autocompleteRequired:"="},controller:["$scope",function(n){n.selectedIndex=-1;n.initLock=!0;n.setIndex=function(t){n.selectedIndex=parseInt(t)};this.setIndex=function(t){n.setIndex(t);n.$apply()};n.getIndex=function(){return n.selectedIndex};var t=!0;n.completing=!1;n.$watch("searchParam",function(i,r){if(r!==i&&(r||!n.initLock)&&(t&&typeof n.searchParam!="undefined"&&n.searchParam!==null&&(n.completing=!0,n.searchFilter=n.searchParam,n.selectedIndex=-1),n.onType))n.onType(n.searchParam)});this.preSelect=function(){t=!1;n.$apply();t=!0};n.preSelect=this.preSelect;this.preSelectOff=function(){t=!0};n.preSelectOff=this.preSelectOff;n.select=function(i){if(i&&(n.searchParam=i,n.searchFilter=i,n.onSelect))n.onSelect(i);t=!1;n.completing=!1;setTimeout(function(){t=!0},1e3);n.setIndex(-1)}}],link:function(t,i,r){var e,f,u;setTimeout(function(){t.initLock=!1;t.$apply()},250);e="";t.attrs={placeholder:"start typing...","class":"",id:"",inputclass:"",inputid:""};for(f in r)e=f.replace("attr","").toLowerCase(),f.indexOf("attr")===0&&(t.attrs[e]=r[f]);r.clickActivation&&(i[0].onclick=function(){t.searchParam||setTimeout(function(){t.completing=!0;t.$apply()},200)});u={left:37,up:38,right:39,down:40,enter:13,esc:27,tab:9};document.addEventListener("keydown",function(n){var i=n.keyCode||n.which;switch(i){case u.esc:t.select();t.setIndex(-1);t.$apply();n.preventDefault()}},!0);document.addEventListener("blur",function(){setTimeout(function(){t.select();t.setIndex(-1);t.$apply()},150)},!0);i[0].addEventListener("keydown",function(i){var f=i.keyCode||i.which,r=angular.element(this).find("li").length;if(t.completing&&r!=0)switch(f){case u.up:if(n=t.getIndex()-1,n<-1)n=r-1;else if(n>=r){n=-1;t.setIndex(n);t.preSelectOff();break}t.setIndex(n);n!==-1&&t.preSelect(angular.element(angular.element(this).find("li")[n]).text());t.$apply();break;case u.down:if(n=t.getIndex()+1,n<-1)n=r-1;else if(n>=r){n=-1;t.setIndex(n);t.preSelectOff();t.$apply();break}t.setIndex(n);n!==-1&&t.preSelect(angular.element(angular.element(this).find("li")[n]).text());break;case u.left:break;case u.right:case u.enter:case u.tab:n=t.getIndex();n!==-1?(t.select(angular.element(angular.element(this).find("li")[n]).text()),f==u.enter&&i.preventDefault()):f==u.enter&&t.select();t.setIndex(-1);t.$apply();break;case u.esc:t.select();t.setIndex(-1);t.$apply();i.preventDefault();break;default:return}})},template:'        <div class="autocomplete {{ attrs.class }}" id="{{ attrs.id }}">          <input            type="text"            ng-model="searchParam"            placeholder="{{ attrs.placeholder }}"            class="{{ attrs.inputclass }}"            id="{{ attrs.inputid }}"            ng-required="{{ autocompleteRequired }}" />          <ul ng-show="completing && (suggestions | filter:searchFilter).length > 0">            <li              suggestion              ng-repeat="suggestion in suggestions | filter:searchFilter | orderBy:\'toString()\' track by $index"              index="{{ $index }}"              val="{{ suggestion }}"              ng-class="{ active: ($index === selectedIndex) }"              ng-click="select(suggestion)"              ng-bind-html="suggestion | highlight:searchParam"><\/li>          <\/ul>        <\/div>'}});app.filter("highlight",["$sce",function(n){return function(t,i){if(typeof t=="function")return"";if(i){var r="("+i.split(/\ /).join(" |")+"|"+i.split(/\ /).join("|")+")",u=new RegExp(r,"gi");r.length&&(t=t.replace(u,'<span class="highlight">$1<\/span>'))}return n.trustAsHtml(t)}}]);app.directive("suggestion",function(){return{restrict:"A",require:"^autocomplete",link:function(n,t,i,r){t.bind("mouseenter",function(){r.preSelect(i.val);r.setIndex(i.index)});t.bind("mouseleave",function(){r.preSelectOff()})}}});sportApp.service("CommonService",["$q","$http",function(n,t){var i=function(){return[{value:1,text:"Tháng 1"},{value:2,text:"Tháng 2"},{value:3,text:"Tháng 3"},{value:4,text:"Tháng 4"},{value:5,text:"Tháng 5"},{value:6,text:"Tháng 6"},{value:7,text:"Tháng 7"},{value:8,text:"Tháng 8"},{value:9,text:"Tháng 9"},{value:10,text:"Tháng 10"},{value:11,text:"Tháng 11"},{value:12,text:"Tháng 12"}]},r=function(i){var r=n.defer();return t({method:"GET",url:common.config.serviceDomain+"/api/commonitems/search?tableName="+i}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise},u=function(i){var r=n.defer();return t({method:"GET",url:common.config.serviceDomain+"/api/provinces/search?CountryId="+i}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise},f=function(i,r){var u=n.defer();return t({method:"GET",url:common.config.serviceDomain+"/api/areas/autocomplete?provinceId="+i+"&key="+r}).success(function(n){u.resolve(n)}).error(function(n){u.reject(n)}),u.promise},e=function(i){var r=n.defer();return t({method:"GET",url:common.config.serviceDomain+"/api/counties/search?ProvinceId="+i}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise},o=function(i,r,u){var f=n.defer();return t({method:"GET",url:common.config.serviceDomain+"api/logicalname/check?moduleId="+i+"&entityId="+r+"&logicalName="+u}).success(function(n){f.resolve(n)}).error(function(n){f.reject(n)}),f.promise},s=function(i,r){var u=n.defer();return t({method:"POST",url:common.config.serviceDomain+i,data:r}).success(function(n){u.resolve(n)}).error(function(n){u.reject(n)}),u.promise},h=function(i){var r=n.defer();return t({method:"GET",url:common.config.serviceDomain+i}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise};return{getAllCommonItems:r,getAllProvinces:u,getAllCounties:e,getAllMonths:i,checkLogicalName:o,searchAreas:f,makePost:s,getJSON:h}}]);commonData={allAgeGroup:[],allType:[],allLevel:[],allProvinces:[],allCounties:[]};sportApp.service("TeamService",["$q","$http",function(n,t){var i=function(){var i=n.defer();return t({method:"GET",url:common.config.serviceDomain+"/api/teams/search"}).success(function(n){i.resolve(n)}).error(function(n){i.reject(n)}),i.promise},r=function(i){var r=n.defer();return t({method:"GET",url:common.config.serviceDomain+"/api/teams/get?TeamId="+i}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise},u=function(i){var r=n.defer();return t({method:"POST",url:common.config.serviceDomain+"/api/teams/update",data:{Team:i}}).success(function(n){r.resolve(n)}).error(function(n){r.resolve(n)}),r.promise},f=function(i){var r=n.defer();return t({method:"POST",url:common.config.serviceDomain+"/api/teams/insert",data:{Team:i}}).success(function(n){r.resolve(n)}).error(function(n){r.resolve(n)}),r.promise},e=function(i){var r=n.defer();return t({method:"DELETE",url:common.config.serviceDomain+"/api/teams/delete?TeamId="+i}).success(function(n){r.resolve(n)}).error(function(n){r.resolve(n)}),r.promise},o=function(i){var r=n.defer();return t({method:"GET",url:common.config.serviceDomain+"/api/teams/users?teamId="+i}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise},s=function(i,r,u){var f=n.defer();return t({method:"POST",url:common.config.serviceDomain+"/api/teams/assignUser",data:{TeamId:i,userIdentifier:r,userName:u}}).success(function(n){f.resolve(n)}).error(function(n){f.resolve(n)}),f.promise},h=function(i,r){var u=n.defer();return t({method:"DELETE",url:common.config.serviceDomain+"/api/teams/deleteuser?teamId="+i+"&userId="+r}).success(function(n){u.resolve(n)}).error(function(n){u.resolve(n)}),u.promise},c=function(i,r,u){var f=n.defer();return t({method:"GET",url:common.config.serviceDomain+"/api/teams/getDeposits?teamId="+i+"&month="+r+"&year="+u}).success(function(n){f.resolve(n)}).error(function(n){f.reject(n)}),f.promise},l=function(i,r,u){var f=n.defer();return t({method:"GET",url:common.config.serviceDomain+"/api/teams/getExpenses?teamId="+i+"&month="+r+"&year="+u}).success(function(n){f.resolve(n)}).error(function(n){f.reject(n)}),f.promise},a=function(i,r,u,f,e){var o=n.defer();return t({method:"POST",url:common.config.serviceDomain+"/api/teams/addOrUpdateDeposit",data:{teamId:i,userId:r,month:u,year:f,amount:e}}).success(function(n){o.resolve(n)}).error(function(n){o.resolve(n)}),o.promise},v=function(i,r,u,f,e,o){var s=n.defer();return t({method:"POST",url:common.config.serviceDomain+"/api/teams/removeDeposit",data:{depositId:i,teamId:r,userId:u,month:f,year:e,amount:o}}).success(function(n){s.resolve(n)}).error(function(n){s.resolve(n)}),s.promise},y=function(i,r,u,f){var e=n.defer();return t({method:"POST",url:common.config.serviceDomain+"/api/teams/addOrUpdateDeposit",data:{teamId:i,month:r,year:u,depositList:f}}).success(function(n){e.resolve(n)}).error(function(n){e.resolve(n)}),e.promise},l=function(i,r,u){var f=n.defer();return t({method:"GET",url:common.config.serviceDomain+"/api/teams/getExpenses?teamId="+i+"&month="+r+"&year="+u}).success(function(n){f.resolve(n)}).error(function(n){f.reject(n)}),f.promise},p=function(i,r,u,f,e,o,s){var h=n.defer();return t({method:"POST",url:common.config.serviceDomain+"/api/teams/addOrUpdateExpense",data:{teamId:i,expenseId:r,month:u,year:f,amount:e,notes:o,datetime:s}}).success(function(n){h.resolve(n)}).error(function(n){h.resolve(n)}),h.promise},w=function(i,r,u,f){var e=n.defer();return t({method:"POST",url:common.config.serviceDomain+"/api/teams/deleteFundExpense",data:{teamId:i,expenseId:f,month:r,year:u}}).success(function(n){e.resolve(n)}).error(function(n){e.resolve(n)}),e.promise},b=function(i){var r=n.defer();return t({method:"GET",url:common.config.serviceDomain+"api/team/contact/"+i}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise},k=function(i){common.ui.showLoading();var r=n.defer();return t({method:"GET",url:common.config.serviceDomain+"api/teams/search",params:i}).success(function(n){common.ui.hideLoading();r.resolve(n)}).error(function(n){common.ui.hideLoading();r.reject(n)}),r.promise};return{getTeamRelatedUser:i,retrieveTeam:r,updateTeam:u,insertTeam:f,deleteTeam:e,loadUsers:o,addUsers:s,deleteUser:h,loadMemberDeposits:c,addOrUpdateDeposit:a,removeDeposit:v,addOrUpdateMultiDeposits:y,loadFundExpenses:l,addOrUpdateFundExpense:p,deleteFundExpense:w,getTeamMobileNo:b,searchTeams:k}}]);teamData={teamRelatedUser:[],activeTeamGuid:null,activeTeamUserRoleId:null};sportApp.service("CalendarService",["$q","$http",function(n,t){var i=function(i,r,u){var f=n.defer();return t({method:"POST",url:common.config.serviceDomain+"/api/calendar/confirmAttendance",data:{calendarId:i,confirmStatus:r,notes:u}}).success(function(n){f.resolve(n)}).error(function(n){f.reject(n)}),f.promise};return{confirmAttendance:i}}]);sportApp.service("MatchFindingService",["$q","$http",function(n,t){var i=function(i){var r=n.defer();return t({method:"POST",url:common.config.serviceDomain+"api/matchFindings/searchRequest",data:i}).success(function(n){r.resolve(n)}).error(function(n){r.resolve(n)}),r.promise},r=function(i){var r=n.defer();return t({method:"POST",url:common.config.serviceDomain+"api/matchFindings/myMatches",data:i}).success(function(n){r.resolve(n)}).error(function(n){r.resolve(n)}),r.promise},u=function(i){for(var o,u=n.defer(),r=jQuery.extend({},i),e=[],f=0;f<r.ageGroupIds.length;f++)e.push({id:r.ageGroupIds[f],name:""});return r.AgeGroupList=e,o={matchRecord:r},t({method:"POST",url:common.config.serviceDomain+"api/matchFindings/makeMatchFindingRequest",data:o}).success(function(n){u.resolve(n)}).error(function(n){u.resolve(n)}),u.promise},f=function(i){var r=n.defer();return t({method:"POST",url:common.config.serviceDomain+"api/matchFindings/makeMatchInvitation",data:i}).success(function(n){r.resolve(n)}).error(function(n){r.resolve(n)}),r.promise},e=function(i,r,u){var f=n.defer();return t({method:"POST",url:common.config.serviceDomain+"api/matchFindings/confirmMatchInvitation",data:{matchFindingRequestId:i,matchRecipientId:r,status:u}}).success(function(n){f.resolve(n)}).error(function(n){f.resolve(n)}),f.promise},o=function(i,r){var u=n.defer();return t({method:"POST",url:common.config.serviceDomain+"api/matchFindings/updateMatchStatus",data:{matchId:i,status:r}}).success(function(n){u.resolve(n)}).error(function(n){u.resolve(n)}),u.promise},s=function(i){var r=n.defer();return t({method:"GET",url:common.config.serviceDomain+"api/matchfinding/getmobilenumbers/"+i}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise},h=function(i){var r=n.defer();return t({method:"GET",url:common.config.serviceDomain+"api/matchFinding/getCurrentUserRecipient/"+i}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise},c=function(i){var r=n.defer();return t({method:"GET",url:common.config.serviceDomain+"api/matchFindings/creation/formdata?matchId="+i}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise};return{searchMatchFindingRequest:i,getMyMatchFindingRequests:r,makeMatchFindingRequest:u,makeMatchInvitation:f,confirmMatchInvitation:e,getMobileNumbers:s,getUserMatchFindingRecipient:h,getMatchCreationFormData:c,updateMatchStatus:o}}]);sportApp.service("StadiumService",["$q","$http","$timeout",function(n,t){var i=function(i){var r=n.defer();return t.post("/ajax/stadiummanagement/listbyuser",{typeid:i.typeId,provinceId:i.provinceId,searchText:i.searchText}).success(function(n){r.resolve(n)}).error(function(n,t,i,u){alert(n);console.log(t);console.log(n);console.log(i);console.log(u);r.reject(n)}),r.promise},r=function(){var i=n.defer();return t.get("/stadiumManagement/GetFormCreationData",{}).success(function(n){i.resolve(n)}).error(function(n,t,r,u){alert(n);console.log(t);console.log(n);console.log(r);console.log(u);i.reject(n)}),i.promise},u=function(i){var r=n.defer();return t({method:"POST",url:"/ajax/stadiummanagement/updateInfo",data:{stadium:i}}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise},f=function(i,r,u){var f=n.defer(),e={};return e=typeof r!="undefined"&&typeof u!="undefined"?{stadiumNumberId:i,fromDate:r,toDate:u}:{stadiumNumberId:i},t({method:"POST",url:"/ajax/stadium/calendar",data:e}).success(function(n){f.resolve(n)}).error(function(n){f.reject(n)}),f.promise},e=function(i){var r=n.defer();return t({method:"POST",url:common.config.serviceDomain+"/api/stadiums/searchStadiums",data:i}).success(function(n){r.resolve(n)}).error(function(n){r.resolve(n)}),r.promise},o=function(i){var r=n.defer();return t({method:"POST",url:common.config.serviceDomain+"api/stadiums/searchStadiumNumbers",data:i}).success(function(n){r.resolve(n)}).error(function(n){r.resolve(n)}),r.promise},s=function(i){var r=n.defer();return t({method:"GET",url:common.config.serviceDomain+"api/stadium/getInfo?stadiumId="+i}).success(function(n){r.resolve(n)}).error(function(n){r.resolve(n)}),r.promise},h=function(i,r){var u=n.defer();return t({method:"GET",url:common.config.serviceDomain+"api/stadiums/autocomplete?provinceId="+i+"&key="+r}).success(function(n){u.resolve(n)}).error(function(n){u.resolve(n)}),u.promise};return{getListStadium:i,updateStadiumInfo:u,initCreateStadium:r,getStadiumNumberCalendar:f,searchStadiums:e,searchStadiumNumbers:o,getStadiumInfo:s,searchStadiumAutoComplete:h}}]);sportApp.service("StadiumBookingService",["$q","$http",function(n,t){var i=function(i){var r=n.defer();return t({method:"POST",url:common.config.serviceDomain+"api/stadium/createbooking",data:i}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise},r=function(i,r,u){var f=n.defer();return t({method:"POST",url:common.config.serviceDomain+"api/stadium/getbooking",data:{bookingId:i,isRepeat:r,date:u}}).success(function(n){f.resolve(n)}).error(function(n){f.reject(n)}),f.promise},c=function(i,r){var u=n.defer();return t({method:"GET",url:common.config.serviceDomain+"api/stadium/getBookingOverview?stadiumid="+i+"&date="+r}).success(function(n){u.resolve(n)}).error(function(n){u.reject(n)}),u.promise},u=function(i,r,u,f,e){var o=n.defer();return t({method:"POST",url:common.config.serviceDomain+"api/stadium/getavailability",data:{stadiumId:i,stadiumNumberId:r,numberOfPlayers:u,fromDate:f,toDate:e}}).success(function(n){o.resolve(n)}).error(function(n){o.reject(n)}),o.promise},f=function(i,r,u){var f=n.defer();return t({method:"POST",url:common.config.serviceDomain+"api/stadium/booking/delete",data:{bookingId:i,isCancelDate:r,cancelledDate:u}}).success(function(n){f.resolve(n)}).error(function(n){f.reject(n)}),f.promise},e=function(i){var r=n.defer();return t({method:"POST",url:common.config.serviceDomain+"api/stadium/booking/approval",data:{bookingId:i}}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise},o=function(i){var r=n.defer();return t({method:"POST",url:common.config.serviceDomain+"api/stadium/booking/reject",data:{bookingId:i}}).success(function(n){r.resolve(n)}).error(function(n){r.reject(n)}),r.promise},s=function(){var i=n.defer();return t({method:"POST",url:common.config.serviceDomain+"api/stadium/booking/pending"}).success(function(n){i.resolve(n)}).error(function(n){i.reject(n)}),i.promise},h=function(i,r,u){var f=n.defer();return t({method:"GET",url:common.config.serviceDomain+"api/stadium/getBookingDates?stadiumId="+i+"&startDate="+r+"&endDate="+u+""}).success(function(n){f.resolve(n)}).error(function(n){f.reject(n)}),f.promise};return{createBooking:i,getBooking:r,getAvailability:u,deleteBooking:f,getPendingBooking:s,approveBooking:e,rejectBooking:o,getBookingDates:h}}]);sportApp.service("NotificationService",["$q","$http",function(n,t){var i=function(i,r){var u=n.defer();return t({method:"GET",url:common.config.serviceDomain+"api/notification/history?pageIndex="+i+"&pageSize="+r+""}).success(function(n){u.resolve(n)}).error(function(n){u.reject(n);location.reload()}),u.promise};return{getNotificationHistory:i}}]);sportApp.service("MatchFindingQueueService",["$q","$http",function(n,t){return{getQueuesOfMatchItems:function(){return t.get("/api/matchFindingQueue/getQueuesOfMatchItems").then(function(n){return n.data})},getQueuesOfTeamItems:function(){return t.get("/api/matchFindingQueue/getQueuesOfTeamItems").then(function(n){return n.data})}}}]);sportApp.service("CommentService",["$q","$http",function(n,t){return{getList:function(n,i){return t.get("/api/comment/getList",{params:{toItemType:n,toItemId:i}}).then(function(n){return n.data})},getReplyModel:function(n){return t.get("/api/comment/getReplyModel",{params:{parentId:n}}).then(function(n){return n.data})},add:function(n){return t.post("/api/comment/add",n).then(function(n){return n.data})},update:function(n){return t.put("/api/comment/update",n).then(function(n){return n.data})},like:function(n){return t.put("/api/comment/like",n).then(function(n){return n.data})},deleteComment:function(n){return t.delete("/api/comment/delete",n).then(function(n){return n})}}}])